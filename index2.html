<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CBCN Study Quiz</title>

  <!-- Optional: your stylesheet (safe to keep or remove) -->
  <link rel="stylesheet" href="style.css" />

  <style>
    /* Minimal built-in styles so it still looks good without style.css */
    :root { --bg:#fff; --text:#111; --panel:#f6f6f6; --accent:#6a5acd; --ok:#1e8e3e; --no:#c62828; }
    html.light { --bg:#fff; --text:#111; --panel:#f6f6f6; }
    html:not(.light){ --bg:#1b1b1b; --text:#f1f1f1; --panel:#2a2a2a; --accent:#a58bff; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text)}
    header{background:var(--panel);padding:.75rem 1rem;display:flex;gap:1rem;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:10}
    header h1{margin:0;font-size:1.1rem}
    main{max-width:980px;margin:1rem auto;padding:0 1rem 3rem}
    .tabs{display:flex;gap:.5rem;flex-wrap:wrap;margin:1rem 0}
    .tabs button{border:0;border-radius:6px;background:var(--panel);color:var(--text);padding:.45rem .8rem;cursor:pointer}
    .tabs button.active,.tabs button:hover{background:var(--accent);color:#fff}
    .view{display:none}.view.active{display:block}
    #packControls{background:var(--panel);padding:.6rem .75rem;border-radius:8px;margin:.5rem 0 1rem;display:flex;flex-wrap:wrap;gap:1rem;align-items:center}
    #packControls label{display:inline-flex;gap:.4rem;align-items:center;cursor:pointer}
    #filterBar{display:flex;gap:.5rem;flex-wrap:wrap;align-items:center;margin-bottom:1rem}
    #choices label{display:block;background:var(--panel);border-radius:8px;padding:.6rem .8rem;margin:.45rem 0}
    .muted{opacity:.8}.sm{font-size:.9rem}
    .tag{display:inline-block;background:var(--accent);color:#fff;border-radius:6px;padding:2px 6px;font-size:.8rem;margin-right:.25rem}
    .stats{display:flex;gap:.8rem;flex-wrap:wrap;margin:.6rem 0}
    .badge{display:inline-block;border-radius:6px;padding:3px 8px;font-size:.85rem}
    .badge.ok{background:var(--ok);color:#fff}.badge.no{background:var(--no);color:#fff}
    button{border:0;border-radius:8px;padding:.5rem .9rem;background:var(--accent);color:#fff;cursor:pointer}
    button.ghost{background:transparent;border:1px solid var(--accent);color:var(--accent)}
    button.hidden{display:none}
    #feedback{background:var(--panel);border-radius:8px;padding:.75rem;margin-top:1rem}
    #loadStatus{margin:.4rem 0;color:#f2c744}
    h2#stem{min-height:2.2em;margin:.4rem 0}
    #bankList .item,#historyList .item{background:var(--panel);border-radius:8px;padding:.7rem .9rem;margin:.6rem 0}
    @media (max-width:650px){header{flex-direction:column;align-items:flex-start}}
  </style>
</head>
<body>
  <header>
    <h1>ü©∫ CBCN Study Quiz</h1>
    <label class="sm"><input type="checkbox" id="optDarkHeader" checked /> Dark Mode</label>
  </header>

  <main>
    <div id="loadStatus" class="sm muted"></div>
    <!-- Pack selector (script.js fills this) -->
    <div id="packControls"></div>

    <div class="tabs">
      <button class="active" data-view="quiz">Quiz</button>
      <button data-view="bank">Question Bank</button>
      <button data-view="history">History</button>
      <button data-view="settings">Settings</button>
    </div>

    <!-- QUIZ VIEW -->
    <div id="view-quiz" class="view active">
      <div id="filterBar">
        <label>Domain:
          <select id="filterDomain"><option>All</option></select>
        </label>
        <label>Tags:
          <input id="filterTags" type="text" placeholder="Comma-separated tags‚Ä¶" />
        </label>
        <button id="reshuffleBtn" type="button">Shuffle</button>
        <button id="resetBtn" type="button">Reset Session</button>
      </div>

      <div id="meta" class="muted sm"></div>
      <div id="badges"></div>

      <h2 id="stem"></h2>
      <div id="choices"></div>

      <div class="stats">
        <span>‚úÖ <b id="statCorrect">0</b></span>
        <span>‚ùå <b id="statIncorrect">0</b></span>
        <span>üî• <b id="statStreak">0</b></span>
        <span>üìö <b id="statBank">0</b></span>
        <span>üî¢ <b id="counter"></b></span>
      </div>

      <div style="display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.6rem">
        <button id="submitBtn" type="button">Submit</button>
        <button id="revealBtn" type="button">Reveal</button>
        <button id="nextBtn" type="button" class="hidden">Next</button>
        <button id="bookmarkBtn" type="button" class="ghost">‚òÖ Bookmark</button>
      </div>

      <div id="feedback" class="hidden">
        <div id="resultBadge" class="badge"></div>
        <p id="rationale" style="margin:.5rem 0;"></p>
        <ul id="whyWrong"></ul>
      </div>
    </div>

    <!-- BANK VIEW -->
    <div id="view-bank" class="view">
      <h2>All Questions</h2>
      <div id="bankList"></div>
    </div>

    <!-- HISTORY VIEW -->
    <div id="view-history" class="view">
      <h2>Answer History</h2>
      <p id="historyEmpty" class="muted">No answers saved yet.</p>
      <div id="historyList"></div>
      <div style="margin-top:1rem;display:flex;gap:.6rem;flex-wrap:wrap">
        <button id="exportBtn" type="button">Export CSV</button>
        <button id="clearHistoryBtn" type="button" class="ghost">Clear History</button>
      </div>
    </div>

    <!-- SETTINGS VIEW -->
    <div id="view-settings" class="view">
      <h2>Settings</h2>
      <label><input type="checkbox" id="optShuffle" checked> Shuffle Questions</label><br />
      <label><input type="checkbox" id="optPersist" checked> Save Answer History</label><br />
      <label><input type="checkbox" id="optDarkSettings" checked> Dark Mode</label><br /><br />
      <button id="clearBookmarksBtn" type="button" class="ghost">Clear Bookmarks</button>
      <h3>Bookmarked Questions</h3>
      <div id="bookmarkList" class="muted sm"></div>
    </div>
  </main>

  <!-- Load all logic (PACKS, loaders, UI handlers) -->
  <script src="script.js"></script>
</body>
</html>
